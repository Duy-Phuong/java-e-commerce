<p>Spring Framework 5.0 is the first major release of the Spring Framework since version 4 was released in December of 2013. <a href="https://spring.io/team/jhoeller" rel="noopener noreferrer" target="_blank">Juergen Hoeller</a>, Spring Framework project lead <a href="https://spring.io/blog/2016/07/28/spring-framework-5-0-m1-released" rel="noopener noreferrer" target="_blank">announced</a> the release of the first Spring Framework 5.0 milestone (5.0 M1) on 28 July 2016.</p><p>Now, a year later, we are looking forward to Release Candidate 3 (RC3) to be released on July 18th, 2017. This is expected to be the final release on the <a href="https://jira.spring.io/browse/spr/?selectedTab=com.atlassian.jira.jira-projects-plugin:roadmap-panel" rel="noopener noreferrer" target="_blank">roadmap</a> to the first GA (General Availability) release of Spring Framework 5.0.</p><p>I’m excited about the new features and enhancements in Spring Framework 5.0.</p><p>At a high level, features of Spring Framework 5.0 can be categorized into:</p><ul><li><p>JDK baseline update</p></li><li><p>Core framework revision</p></li><li><p>Core container updates</p></li><li><p>Functional programming with Kotlin</p></li><li><p>Reactive Programming Model</p></li><li><p>Testing improvements</p></li><li><p>Library support</p></li><li><p>Discontinued support</p></li></ul><h4>JDK Baseline Update for Spring Framework 5.0</h4><p>The entire Spring framework 5.0 codebase runs on Java 8. Therefore, Java 8 is the minimum requirement to work on Spring Framework 5.0.</p><p>This is actually very significant for the framework. While as developers, we’ve been able to enjoy all the new features found in modern Java releases. The framework itself was carrying a lot of baggage in supporting deprecated Java releases.</p><p>The framework now requires a minimum of Java 8.</p><p>Originally, Spring Framework 5.0 was expected to release on Java 9. However, with the Java 9 release running 18 months + behind, the <a href="https://twitter.com/springframework/lists/team/members" rel="noopener noreferrer" target="_blank">Spring team</a> decided to decouple the Spring Framework 5.0 release from Java 9.</p><p>However, when Java 9 is released (<a href="http://openjdk.java.net/projects/jdk9/" rel="noopener noreferrer" target="_blank">expected in September of 2017</a>), Spring Framework 5.0 will be ready.</p><h4>Core Framework Revision</h4><p>The core Spring Framework 5.0 has been revised to utilize the new features introduced in Java 8. The key ones are:</p><ul><li><p>Based on Java 8 reflection enhancements, method parameters in Spring Framework 5.0 can be efficiently accessed.</p></li><li><p>Core Spring interfaces now provide selective declarations built on Java 8 default methods.</p></li><li><p>@Nullable and @NotNull annotations to explicitly mark nullable arguments and return values. This enables dealing null values at compile time rather than throwing NullPointerExceptions at runtime.</p></li></ul><p>On the logging front, Spring Framework 5.0 comes out of the box with Commons Logging bridge module, named spring-jcl instead of the standard Commons Logging. Also, this new version will auto detect Log4j 2.x, SLF4J, JUL ( java.util.logging) without any extra bridges.</p><p>Defensive programming also gets a thrust with the Resource abstraction providing the isFile indicator for thegetFile method.</p><h4>Core Container Updates</h4><p>Spring Framework 5.0 now supports candidate component index as an alternative to classpath scanning. This support has been added to shortcut the candidate component identification step in the classpath scanner.<br></p><p>An application build task can define its own META-INF/spring.components file for the current project. At compilation time, the source model is introspected and JPA entities and Spring Components are flagged.<br></p><p>Reading entities from the index rather than scanning the classpath does not have significant differences for small projects with less than 200 classes. However, it has significant impacts on large projects.</p><p>Loading the component index is cheap. Therefore the startup time with the index remains constant as the number of classes increase. While for a compoent scan the startup time increases significantly.</p><p>What this means for us developers on large Spring projects, the startup time for our applications will be reduced significantly. While 20 or 30 seconds does not seem like much, when you’re waiting for that dozens or hundreds of times a day, it adds up. Using the component index will help with your daily productivity.</p><p>You can find more information on the component index feature on <a href="https://jira.spring.io/browse/SPR-11890" rel="noopener noreferrer" target="_blank">Spring’s Jira</a>.</p><p>Now  @Nullable annotations can also be used as indicators for optional injection points. Using  @Nullableimposes an obligation on the consumers that they must prepare for a value to be null. Prior to this release, the only way to accomplish this is through <a href="https://developer.android.com/reference/android/support/annotation/Nullable.html" rel="noopener noreferrer" target="_blank">Android’s Nullable</a>, <a href="https://checkerframework.org/api/org/checkerframework/checker/nullness/qual/Nullable.html" rel="noopener noreferrer" target="_blank">Checker Framework’s Nullable</a>, and <a href="https://jcp.org/en/jsr/detail?id=305" rel="noopener noreferrer" target="_blank">JSR 305’s Nullable</a>.</p><p>Some other new and enhanced features from the release note are:</p><ul><li><p>Implementation of functional programming style in GenericApplicationContext andAnnotationConfigApplicationContext</p></li><li><p>Consistent detection of transaction, caching, async annotations on interface methods.</p></li><li><p>XML configuration namespaces streamlined towards unversioned schemas.</p></li></ul><h4>Functional Programming with Kotlin</h4><p>Spring Framework 5.0 introduces support for JetBrains <a href="https://kotlinlang.org/" rel="noopener noreferrer" target="_blank">Kotlin</a> language. Kotlin is an object-oriented language supporting functional programming style.</p><p>Kotlin runs on top of the JVM, but not limited to it. With Kotlin support, developers can dive into functional Spring programming, in particular for functional Web endpoints and bean registration.</p><p>In Spring Framework 5.0, you can write clean and idiomatic Kotlin code for Web functional API, like this.</p><pre class="prettyprint linenums">{
("/movie" and accept(TEXT_HTML)).nest {
GET("/", movieHandler::findAllView)
GET("/{card}", movieHandler::findOneView)
}
("/api/movie" and accept(APPLICATION_JSON)).nest {
GET("/", movieApiHandler::findAll)
GET("/{id}", movieApiHandler::findOne)
}
}</pre><p>For bean registration, as an alternative to XML or @Configuration and @Bean, you can now use Kotlin to register your Spring Beans, like this:</p><pre class="prettyprint linenums">val context = GenericApplicationContext {
registerBean()
registerBean { Cinema(it.getBean()) }
}</pre><h4>Reactive Programming Model</h4><p>An exciting feature in this Spring release is the new reactive stack Web framework.</p><p>Being fully reactive and non-blocking, this Spring Framework 5.0 is suitable for event-loop style processing that can scale with a small number of threads.</p><p><a href="http://springframework.guru/reactive-streams-in-java/" rel="noopener noreferrer" target="_blank">Reactive Streams</a> is an API specification developed by engineers from Netflix, Pivotal, Typesafe, Red Hat, Oracle, Twitter, and Spray.io. This provides a common API for reactive programming implementations to implement. Much like JPA for Hibernate. Where JPA is the API, and Hibernate is the implementation.</p><p>The Reactive Streams API is officially part of Java 9. In Java 8, you will need to include a dependency for the Reactive Streams API specification.</p><p>Streaming support in Spring Framework 5.0 is built upon <a href="https://projectreactor.io/" rel="noopener noreferrer" target="_blank">Project Reactor</a>, which implements the Reactive Streams API specification.</p><p>Spring Framework 5.0 has a new  spring-webflux module that supports reactive HTTP and WebSocket clients. Spring Framework 5.0 also provides support for reactive web applications running on servers which includes REST, HTML, and WebSocket style interactions.</p><p>I have a detailed post about Reactive Streams <a href="http://springframework.guru/reactive-streams-in-java/" rel="noopener noreferrer" target="_blank">here</a>.</p><p>There are two distinct programming models on the server-side in spring-webflux:</p><ul><li><p>Annotation-based with @Controller and the other annotations of Spring MVC</p></li><li><p>Functional style routing and handling with Java 8 lambda</p></li></ul><p>With Spring Webflux, you can now create WebClient, which is reactive and non-blocking as an alternative toRestTemplate.</p><p>A WebClient implementation of a REST endpoint in Spring 5.0 is this.<br></p><pre class="prettyprint linenums">WebClient webClient = WebClient.create();
Mono person = webClient.get()
.uri("http://localhost:8080/movie/42")
.accept(MediaType.APPLICATION_JSON)
.exchange()
.then(response -&gt; response.bodyToMono(Movie.class));</pre><p>While the new WebFlux module brings us some exciting new capabilities, traditional Spring MVC is still fully supported in Spring Framework 5.0.</p><h4>Testing Improvements</h4><p>Spring Framework 5.0 fully supports <a href="http://junit.org/junit5/docs/current/user-guide/" rel="noopener noreferrer" target="_blank">Junit 5 Jupiter</a> to write tests and extensions in JUnit 5. In addition to providing a programming and extension model, the Jupiter sub-project provides a test engine to run Jupiter based tests on Spring.</p><p>In addition, Spring Framework 5 provides support for parallel test execution in Spring TestContext Framework.
For the reactive programming model, spring-test now includes WebTestClient for integrating testing support for Spring WebFlux. The new WebTestClient, similar to MockMvc does not need a running server. Using a mock request and response, WebTestClient can bind directly to the WebFlux server infrastructure.</p><p>For a complete list enhancements in the existing TestContext framework, you can refer <a href="https://github.com/spring-projects/spring-framework/wiki/What%27s-New-in-the-Spring-Framework#testing-improvements" rel="noopener noreferrer" target="_blank">here</a>.</p><p>Of course, Spring Framework 5.0 still supports our old friend JUnit 4 as well! At the time of writing, JUnit 5 is just about to go GA. Support for JUnit 4 is going to be with the Spring Framework for some time into the future.</p><h4>Library Support</h4><p>Spring Framework 5.0 now supports the following upgraded library versions:</p><ul><li><p><a href="https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.6" rel="noopener noreferrer" target="_blank">Jackson 2.6</a>+</p></li><li><p><a href="http://www.ehcache.org/documentation/3.0/" rel="noopener noreferrer" target="_blank">EhCache</a> 2.10+ / 3.0 GA</p></li><li><p><a href="https://docs.jboss.org/hibernate/orm/5.0/userguide/html_single/Hibernate_User_Guide.html" rel="noopener noreferrer" target="_blank">Hibernate 5.0</a>+</p></li><li><p><a href="https://docs.oracle.com/javadb/10.8.3.0/ref/rrefjdbc4_0summary.html" rel="noopener noreferrer" target="_blank">JDBC 4.0</a>+</p></li><li><p><a href="https://github.com/xmlunit/user-guide/wiki" rel="noopener noreferrer" target="_blank">XmlUnit 2.x</a>+</p></li><li><p><a href="https://square.github.io/okhttp/" rel="noopener noreferrer" target="_blank">OkHttp 3.x</a>+</p></li><li><p><a href="https://netty.io/wiki/user-guide-for-4.x.html" rel="noopener noreferrer" target="_blank">Netty 4.1</a>+</p></li></ul><h4>Discontinued Support</h4><p>At the API level, Spring Framework 5.0 has discontinued support for the following packages:</p><ul><li><p>beans.factory.access</p></li><li><p>jdbc.support.nativejdbc</p></li><li><p>mock.staticmock of the spring-aspects module.</p></li><li><p>web.view.tiles2M. Now Tiles 3 is the minimum requirement.</p></li><li><p>orm.hibernate3 and orm.hibernate4. Now, Hibernate 5 is the supported framework.</p></li></ul><p>Spring Framework 5.0 has also discontinued support for the following libraries:</p><ul><li><p>Portlet</p></li><li><p>Velocity</p></li><li><p>JasperReports</p></li><li><p>XMLBeans</p></li><li><p>JDO</p></li><li><p>Guava</p></li></ul><p>If you are using any of the preceding packages, it is recommended to stay on Spring Framework 4.3.x.</p><h4>Summary</h4><p>The highlight of the Spring Framework 5.0 is definitely reactive programming, which is a significant paradigm shift. </p><p>You can look at Spring Framework 5.0 as a cornerstone release for reactive programs. For the remainder of 2017 and beyond, you can expect to see child projects implement reactive features. You will see reactive programming features added to upcoming releases of Spring Data, Spring Security, Spring Integration and more.</p><p>The Spring Data team has already implemented reactive support for MongoDB and Redis.</p><p>It’s still too early to get reactive support with JDBC. The JDBC specification itself is blocking. So, its going to be some time before we see reactive programming with traditional JDBC databases.</p><p>While Reactive Programming is the shiny new toy inside of Spring Framework 5.0, it’s not going to be supported everywhere. The downstream technologies need to provide reactive support.</p><p>With the growing popularity of Reactive Programming, we can expect to see more and more technologies implement Reactive solutions. The reactive landscape is rapidly evolving. Spring Framework 5 uses Reactor, which is Reactive Streams compliant implementation. You can read more about the Reactive Streams specification <a href="http://springframework.guru/reactive-streams-in-java/" rel="noopener noreferrer" target="_blank">here</a>.</p>